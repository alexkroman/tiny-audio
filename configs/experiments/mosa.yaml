# @package _global_
# MOSA-Base (Mixture of Simple Adapters) projector
# Based on arXiv:2508.18998
# - 4 experts with simple 2-layer ReLU router
# - Conv-based downsampling: 2x Conv1d stride-2 (4x total)
# - Adapter: encoder_dim -> 4096 -> llm_dim
#
# Dimensions (auto-detected):
#   GLM-ASR-Nano-2512 encoder: 2048
#   Qwen3-1.7B LLM: 2048

model:
  projector_type: mosa
  num_experts: 4
  adapter_hidden_dim: 4096
  router_hidden_dim: 512
  audio_model_id: zai-org/GLM-ASR-Nano-2512
  text_model_id: Qwen/Qwen3-1.7B

training:
  hub_model_id: "mazesmazes/tiny-audio"
  per_device_train_batch_size: 14
  per_device_eval_batch_size: 14
  gradient_accumulation_steps: 2
  num_train_epochs: 1
  save_steps: 1000
  eval_steps: 1000

  # SpecAugment settings
  use_specaugment: true

  # Time Masking
  mask_time_length: 100       # (T) Max length of time mask
  mask_time_min_masks: 2      # (m_T) Exact number of time masks
  mask_time_prob: 0.0         # Set to 0 to enforce fixed count (min_masks) only

  # Frequency Masking
  mask_feature_length: 27     # (F) Max length of freq mask
  mask_feature_min_masks: 2   # (m_F) Exact number of freq masks
  mask_feature_prob: 0.0      # Set to 0 to enforce fixed count (min_masks) only
