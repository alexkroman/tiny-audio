# @package _global_
# MOSA-Base (Mixture of Simple Adapters) projector
# Based on arXiv:2508.18998
# - 4 experts with simple 2-layer ReLU router
# - Conv-based downsampling: 2x Conv1d stride-2 (4x total)
# - Adapter: encoder_dim -> 2048 -> llm_dim (scaled for Qwen-0.6B)
#
# Dimensions (auto-detected):
#   GLM-ASR-Nano-2512 encoder: 2048
#   Qwen3-0.6B LLM: 1024

model:
  projector_type: mosa
  num_experts: 4
  adapter_hidden_dim: 1024
  router_hidden_dim: 128
  audio_model_id: zai-org/GLM-ASR-Nano-2512
  text_model_id: Qwen/Qwen3-0.6B

training:
  learning_rate: 1e-3  # Higher LR to train projector
  weight_decay: 0.01
  hub_model_id: "mazesmazes/tiny-audio"
  per_device_train_batch_size: 20
  per_device_eval_batch_size: 20
  gradient_accumulation_steps: 6
  num_train_epochs: 1
  save_steps: 1000
  eval_steps: 1000

  # SpecAugment settings
  use_specaugment: true
  num_time_masks: 2
  time_mask_length: 100
  num_freq_masks: 2
  freq_mask_length: 27
