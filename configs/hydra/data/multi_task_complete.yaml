# Complete multi-task dataset configuration with all four tasks
datasets:
  # Transcription task - LoquaciousSet
  - path: speechbrain/LoquaciousSet
    name: large
    audio_column: wav
    text_column: text
    task: transcribe  # Mark as transcription task
    train_splits:
      - train
    eval_splits:
      - dev
    sampling_weight: 0.4  # 40% of training samples - increased from 30%

  # Continuation task - SODA-Audio
  - path: fixie-ai/soda-audio
    name: default
    audio_column: audio_second_last_turn
    text_column: alt_last_turn
    task: continue  # Mark as continuation task
    train_splits:
      - train
    eval_splits:
      - validation
    sampling_weight: 0.25  # 25% of training samples

  # Description task - AudioSet Strong
  - path: CLAPv2/audioset_strong
    audio_column: audio
    text_column: text
    task: describe  # Mark as description task
    train_splits:
      - train
    eval_splits:
      - validation
    sampling_weight: 0.25  # 25% of training samples

  # Emotion task - CAMEO
  - path: amu-cai/CAMEO
    audio_column: audio
    text_column: emotion
    task: emotion  # Mark as emotion recognition task
    train_splits:
      # Use all CAMEO splits except oreau (smallest, reserved for validation)
      # Total training samples: 40,761 (vs previous 7,442)
      - crema_d       # 7,440 samples
      - cafe          # 936 samples
      - emns          # 1,205 samples
      - emozionalmente  # 6,902 samples
      - enterface     # 1,257 samples
      - jl_corpus     # 2,400 samples
      - mesd          # 862 samples
      - nemo          # 4,481 samples
      - pavoque       # 5,442 samples
      - ravdess       # 1,440 samples
      - resd          # 1,396 samples
      - subesco       # 7,000 samples
    eval_splits:
      - oreau  # Use oreau split for validation (502 samples) - smallest split
    sampling_weight: 0.1  # 10% of training samples - reduced to prevent overfitting

# Audio processing
sample_rate: 16000

# SpecAugment parameters (wav2vec2-style masking)
mask_time_prob: 0.05
mask_time_length: 10
mask_feature_prob: 0.0
mask_feature_length: 10

# Processing options
dataset_cache_dir: ${hydra:runtime.cwd}/datasets_cache
num_proc: 8
max_train_samples: null
max_eval_samples: 500  # Keep eval manageable
use_streaming: true